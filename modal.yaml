# modal.yaml - template for running TinyZero_AstarPO on modal.com
#
# This is a template. Modal's config schema may change; use this as a starting
# point for creating a modal image and running a GPU container.

image:
  build: .

run:
  # Command to run inside the container. Use `configs/smoke.yaml` for a cheap test.
  cmd: bash -lc "./scripts/run_modal.sh configs/default.yaml"
  # Request a single GPU (adjust instance type on modal to match availability/cost)
  resources:
    gpu: 1
    # Optionally request a specific gpu type, e.g. v100, a100 (depends on modal offerings)
    # gpu_type: "a100"
    cpu: 4
    memory: "32G"

# Cost-control and timeouts (set before launching jobs on modal)
# - Use `configs/smoke.yaml` for development.
# - Limit `training.total_iterations` in the config to cap GPU usage.
# - Monitor modal dashboard to stop jobs early if cost exceeds budget.
