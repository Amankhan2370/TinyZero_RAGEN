# modal.yaml - template for running TinyZero_AstarPO on modal.com
#
# This is a template. Modal's config schema may change; use this as a starting
# point for creating a modal image and running a GPU container.

image:
  build: .

run:
  # Command to run inside the container. Default uses the smoke config to keep costs low.
  cmd: bash -lc "./scripts/run_modal.sh configs/smoke.yaml"
  # For smoke/development runs prefer CPU-only resources to avoid GPU spend.
  resources:
    gpu: 0
    cpu: 1
    memory: "4G"

# Cost-control and timeouts (set before launching jobs on modal)
# - Use `configs/smoke.yaml` for development.
# - Limit `training.total_iterations` in the config to cap GPU usage.
# - Monitor modal dashboard to stop jobs early if cost exceeds budget.
